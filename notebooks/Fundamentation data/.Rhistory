install.packages("tidyverse")
library(tidyverse)
install.packages("tidyverse")
install.packages("tidyverse")
library(tidyverse)
library(tidyverse)
library(tidyverse)
library(conflicted)
getwd()
library(tidyverse)
library(conflicted)
install.packages("ggplot2")
install.packages("dplyr")
library(ggplot2)
library(dplyr)
install.packages("ggplot2")
install.packages("ggplot2")
library(ggplot2)
library(dplyr)
# 创建示例数据
population_data <- data.frame(
AgeGroup = rep(c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34",
"35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69",
"70-74", "75-79", "80-84", "85+"), 2),
Gender = rep(c("Male", "Female"), each = 18),
Population = c(200, 180, 150, 140, 130, 120, 110, 100, 90, 80, 70, 60, 50,
40, 30, 20, 10, 5, 180, 160, 140, 130, 120, 110, 100, 90, 80,
70, 60, 50, 40, 30, 20, 10, 5, 3)
)
# 调整男性人口为负数
population_data <- population_data %>%
mutate(Population = ifelse(Gender == "Male", -Population, Population))
# 绘制人口金字塔
ggplot(population_data, aes(x = AgeGroup, y = Population, fill = Gender)) +
geom_bar(stat = "identity", position = "identity") +
coord_flip() +
scale_y_continuous(labels = abs) +
labs(title = "Population Pyramid", x = "Age Group", y = "Population") +
theme_minimal()
# 创建示例数据
population_data <- data.frame(
AgeGroup = rep(c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34",
"35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69",
"70-74", "75-79", "80-84", "85+"), 2),
Gender = rep(c("Male", "Female"), each = 18),
Population = c(200, 180, 150, 140, 130, 120, 110, 100, 90, 80, 70, 60, 50,
40, 30, 20, 10, 5, 180, 160, 140, 130, 120, 110, 100, 90, 80,
70, 60, 50, 40, 30, 20, 10, 5, 3)
)
# 调整男性人口为负数
population_data <- population_data %>%
mutate(Population = ifelse(Gender == "Male", -Population, Population))
# 检查数据
print(population_data)
# 绘制人口金字塔
ggplot(population_data, aes(x = AgeGroup, y = Population, fill = Gender)) +
geom_bar(stat = "identity", position = "identity") +
coord_flip() +
scale_y_continuous(labels = abs) +
labs(title = "Population Pyramid", x = "Age Group", y = "Population") +
theme_minimal()
# 绘制人口金字塔
ggplot(population_data, aes(x = AgeGroup, y = Population, fill = Gender)) +
geom_bar(stat = "identity", position = "identity") +
coord_flip() +
scale_y_continuous(labels = abs) +
labs(title = "Population Pyramid", x = "Age Group", y = "Population") +
theme_minimal()
# 创建示例数据
population_data <- data.frame(
AgeGroup = rep(c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34",
"35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69",
"70-74", "75-79", "80-84", "85+"), 2),
Gender = rep(c("Male", "Female"), each = 18),
Population = c(200, 180, 150, 140, 130, 120, 110, 100, 90, 80, 70, 60, 50,
40, 30, 20, 10, 5, 180, 160, 140, 130, 120, 110, 100, 90, 80,
70, 60, 50, 40, 30, 20, 10, 5, 3)
)
# 确保 AgeGroup 按正确顺序排序
population_data$AgeGroup <- factor(population_data$AgeGroup, levels = c(
"0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34",
"35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69",
"70-74", "75-79", "80-84", "85+"))
# 调整男性人口为负数
population_data <- population_data %>%
mutate(Population = ifelse(Gender == "Male", -Population, Population))
# 检查数据
print(population_data)
# 绘制人口金字塔
ggplot(population_data, aes(x = AgeGroup, y = Population, fill = Gender)) +
geom_bar(stat = "identity", position = "identity") +
coord_flip() +
scale_y_continuous(labels = abs) +
labs(title = "Population Pyramid", x = "Age Group", y = "Population") +
theme_minimal()
install.packages("stringr")
install.packages("readr")
View(population_data)
install.packages("networkD3")
View(population_data)
library(networkD3)
library(readxl)
install.packages("readxl")
library(readxl)
setwd("~/Library/CloudStorage/OneDrive-TheUniversityofQueensland/Travel Network Analysis/Fundamentation data")
# Load data
df <- read_excel("arrive by region.xlsx")
# Convert column names to character type
names(df) <- as.character(names(df))
# Prepare data for the Sankey diagram
nodes <- unique(c(df$`Arrivals from regions`, df$Country, 'Fiji', 'French Polynesia', 'Samoa'))
nodes <- data.frame(name = nodes)
# Create source and target indices
df$source <- match(df$`Arrivals from regions`, nodes$name) - 1
df$target <- match(df$Country, nodes$name) - 1
# Create links data frame
links <- data.frame(
source = df$source,
target = df$target,
value = df$`2019`
)
# Generate Sankey diagram
sankey <- sankeyNetwork(
Links = links,
Nodes = nodes,
Source = "source",
Target = "target",
Value = "value",
NodeID = "name",
units = "number of arrivals",
fontSize = 16,
nodeWidth = 30
)
# Save Sankey diagram as HTML file
saveNetwork(sankey, file = "sankey_diagram.html")
sankey
